// variables for the lift and cap manipulator
int liftAngle;
int manipAngle;
int Placeholder;
int errorLift;
int errorManip;
int motorPower;
int mControl;
int lControl;
int last_error;
// sets motors to correct power for lift
void liftMotorSet ( int value )
{
	motor[liftOne] = value;
	motor[liftTwo] = value;
}
//sets motors to correct power for manipulator
void manipMotorSet (int value )
{
	motor[Placeholder] = value;
}
// task for controlling the manipulator's movements
task CapControl()
{
	lControl = 0;
	while(true)
	{
		while(mControl)
		{
			errorManip = manipAngle - SensorValue(manipPot);
			motorPower = errorManip * .05;
			if(SensorValue(manipPot) >= Placeholder) motor[Placeholder] = 10;
			if(SensorValue(manipPot) <= Placeholder) motor[Placeholder] = 10;
			if(sgn(errorLift) != sgn(last_error) ) motor[Placeholder] = 10;
			if( motorPower > 127 ) motorPower = 127;
			if( motorPower < -127 ) motorPower = -127;
			manipMotorSet (motorPower);
			errorManip = last_error;
			wait1Msec(20);
		}
		wait1Msec(10);
	}
}
//task for controlling the lift's movements
task LiftControl()
{
	mControl = 0;
	while(true)
	{
		while(lControl)
		{
			errorLift = liftAngle - SensorValue(manipPot);
			motorPower = errorLift * .05;
			if(SensorValue(liftPot) >= Placeholder) motor [liftTwo] = motor[liftOne] = 10;
			if(SensorValue(liftPot) <= Placeholder) motor [liftTwo] = motor[liftOne] = 10;
			if(sgn(errorLift) != sgn(last_error) ) motor [liftTwo] = motor[liftOne] = 10;
			if( motorPower > 127 ) motorPower = 127;
			if( motorPower < -127 ) motorPower = -127;
			liftMotorSet (motorPower);
			errorLift = last_error;
			wait1Msec(20);
		}
		wait1Msec(10);
	}
}
task usercontrol()
{
	startTask(CapControl);
	startTask(LiftControl);

	while (true)
	{
	//-----Lift-----//
		if(Placeholder==1)
		{
			lControl = 1;
			liftAngle = Placeholder;
		}
		else if(Placeholder==1)
		{
			liftMotorSet (127);
			lControl = 0;
		}
		else if(Placeholder==1)
		{
			liftMotorSet (-127);
			lControl = 0;
		}
		else if(lControl == 0 && Placeholder == 0 && Placeholder ==0)
		{
			liftMotorSet (10);
		}
		//-----Cap-Manipulator----//
		if(Placeholder==1)
		{
			mControl = 1;
			manipAngle = Placeholder;
		}
		else if(Placeholder==1)
		{
			mControl = 1;
			manipAngle = Placeholder;
		}
		else if(Placeholder==1)
		{
			mControl = 1;
			manipAngle = Placeholder;
		}
		else if(Placeholder==1)
		{
			manipMotorSet (127);
			mControl = 0;
		}
		else if(Placeholder==1)
		{
			manipMotorSet (-127);
			mControl = 0;
		}
		else if(mControl == 0 && Placeholder == 0 && Placeholder ==0)
		{
			manipMotorSet (10);
		}
		wait1Msec(10);
	}
}
